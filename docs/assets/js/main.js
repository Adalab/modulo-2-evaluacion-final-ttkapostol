"use strict";const imgPlaceholder="https://via.placeholder.com/210x295/ffffff/666666/?text=TV",input=document.querySelector(".js-input"),searchBtn=document.querySelector(".js-search-btn"),resetBtn=document.querySelector(".js-reset-btn"),notFound=document.querySelector(".js-msg"),resetFavBtn=document.querySelector(".js-resetFavBtn"),cocktailsList=document.querySelector(".js-list-cocktails"),favouritesList=document.querySelector(".js-list-favourites");let cocktailsListData=[],favouritesListData=[];const storedCocktails=JSON.parse(localStorage.getItem("cocktails"));function addCocktails(t){fetch(t).then(t=>t.json()).then(t=>{t.drinks?(cocktailsListData=t.drinks,console.log(t.drinks),renderCocktailsList(cocktailsListData),notFound.innerHTML="",console.log("I fetch")):(notFound.innerHTML="¡Nos has pillado! Parece que no tenemos el coctel que estás buscando...",cocktailsListData=[],renderCocktailsList(cocktailsListData))})}function handleEnterSearch(t){"Enter"===t.code&&handleClickSearch(t)}function handleClickSearch(t){cocktailsList.innerHTML="";addCocktails("http://www.thecocktaildb.com/api/json/v1/1/search.php?s="+input.value)}function renderCocktail(t){const e=favouritesListData.find(e=>e.strDrink===t.strDrink),i=document.createElement("li"),a=document.createElement("article"),s=document.createElement("h3"),c=document.createTextNode(t.strDrink),n=document.createElement("img");i.setAttribute("class","li js-li-cocktail "+(e&&"selected")),i.setAttribute("id",t.idDrink),a.setAttribute("class","li__article"),n.setAttribute("src",t.strDrinkThumb||imgPlaceholder),n.setAttribute("class","li__article--img"),s.appendChild(c),a.appendChild(s),a.appendChild(n),i.appendChild(a),cocktailsList.appendChild(i)}function renderCocktailsList(t){cocktailsList.innerHTML="";for(const e of t)renderCocktail(e);addEventToCocktail()}function renderFavCocktail(t){console.log(t);const e=document.createElement("li"),i=document.createElement("article"),a=document.createElement("h3"),s=document.createElement("span"),c=document.createElement("img");e.setAttribute("class","liFav js-li-cocktail"),e.setAttribute("id",t.idDrink),i.setAttribute("class","liFav__article"),a.setAttribute("class","liFav__article--title");const n=document.createTextNode(t.strDrink);s.setAttribute("class","fa-solid fa-heart js-fav-btn"),s.addEventListener("click",handleClickFavBtn),c.setAttribute("src",t.strDrinkThumb||imgPlaceholder),c.setAttribute("class","liFav__article--img"),a.appendChild(n),a.appendChild(s),i.appendChild(a),i.appendChild(c),e.appendChild(i),favouritesList.appendChild(e)}function renderFavouritesList(t){favouritesList.innerHTML="";for(const e of t)renderFavCocktail(e)}function addEventToCocktail(){const t=document.querySelectorAll(".js-li-cocktail");for(const e of t)e.addEventListener("click",handleClickCocktail)}function addSelected(t){null!==t&&t.classList.add("selected"),resetFavBtnHidden()}function removeSelected(t){null!==t&&t.classList.remove("selected"),resetFavBtnHidden()}function handleClickCocktail(t){const e=t.currentTarget.id;console.log(e);const i=cocktailsListData.find(t=>t.idDrink===e),a=favouritesListData.findIndex(t=>t.idDrink===e);-1===a?(favouritesListData.push(i),addSelected(t.currentTarget)):(favouritesListData.splice(a,1),removeSelected(t.currentTarget)),renderCocktailsList(cocktailsListData),renderFavouritesList(favouritesListData),localStorage.setItem("cocktails",JSON.stringify(favouritesListData))}function resetFavBtnHidden(){favouritesListData&&favouritesListData.length>0?resetFavBtn.classList.remove("hidden"):resetFavBtn.classList.add("hidden")}function handleClearFavList(){favouritesListData=[],localStorage.removeItem("cocktails"),resetFavBtnHidden(),renderFavouritesList(favouritesListData),renderCocktailsList(cocktailsListData)}function handleClickFavBtn(t){const e=t.currentTarget.id,i=favouritesListData.findIndex(t=>t.idDrink===e);-1!==i&&favouritesListData.splice(i,1),renderFavouritesList(favouritesListData),renderCocktailsList(cocktailsListData),localStorage.setItem("cocktails",JSON.stringify(favouritesListData))}function handleClickReset(t){t.preventDefault(),cocktailsListData=[],favouritesListData=[],input.value="",localStorage.removeItem("cocktails"),renderFavouritesList(favouritesListData),renderCocktailsList(cocktailsListData)}storedCocktails&&(favouritesListData=storedCocktails,renderFavouritesList(favouritesListData),console.log("I have LS")),addCocktails("https://www.thecocktaildb.com/api/json/v1/1/search.php?s=margarita"),resetFavBtn.addEventListener("click",handleClearFavList),resetBtn.addEventListener("click",handleClickReset),searchBtn.addEventListener("click",handleClickSearch),input.addEventListener("keyup",handleEnterSearch);